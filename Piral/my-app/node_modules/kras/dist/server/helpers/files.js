"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.withFiles = void 0;
const readFile = require("send");
const path_1 = require("path");
function withFiles(server, config) {
    const api = config.api;
    if (api !== false) {
        const prefix = `${api}/static/`;
        const options = {
            root: path_1.dirname(config.client),
        };
        server.at(api, 'static/*').get((req, res) => {
            const path = req.url.substr(prefix.length);
            readFile(req, path, options).pipe(res);
        });
    }
}
exports.withFiles = withFiles;
